{% assign size_chart_richtext = product.metafields.custom.pop_up_size %}

{% if size_chart_richtext %}
  <div class="custom-richtext-size-chart">
    <style>
      .custom-richtext-size-chart .size-chart-button {
        padding: 0.5rem 0rem;
        /* background-color: ; */
        color: #000;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-top: 1rem;
      }
      .button:hover{

          background-color: #fff !impotant;
        color: #000 !important;
      }
  .custom-richtext-size-chart .size-chart-button:hover {
        padding: 0.5rem 1rem;
        background-color: #fff !impotant;
        color: #000 !important;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-top: 1rem;
      }
      .custom-richtext-size-chart .size-chart-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.6);
        justify-content: center;
        align-items: center;
        z-index: 9999;
      }

      .custom-richtext-size-chart .size-chart-modal.active {
        /* background-color:#fff ; */
        /* color: #000;*/
        display: flex; 
      }

      .custom-richtext-size-chart .size-chart-modal-content {
        background: #fff;
        max-width: 700px;
        max-height: 85vh;
        overflow-y: auto;
        padding: 2rem;
        border-radius: 8px;
        position: relative;
        box-shadow: 0 0 10px rgba(0,0,0,0.25);
      }

      .custom-richtext-size-chart .size-chart-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        line-height: 1;
      }

      .custom-richtext-size-chart .size-chart-modal-content p {
        margin: 0 0 1rem;
      }
    </style>

    <a class="size-chart-button" >
      <span> <img src="https://cdn.shopify.com/s/files/1/0589/9629/3716/files/sizechart-icon.webp?v=1749816994" 
     alt="Size Chart Icon" width="16" height="16" />

 </span>
      Size Guide</a>

    <div class="size-chart-modal">
      <div class="size-chart-modal-content" onclick="event.stopPropagation()">
        <button class="size-chart-close" type="button">&times;</button>
        {{ size_chart_richtext | metafield_tag }}
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const wrapper = document.querySelector(".custom-richtext-size-chart");
        if (!wrapper) return;

        const openBtn = wrapper.querySelector(".size-chart-button");
        const modal = wrapper.querySelector(".size-chart-modal");
        const closeBtn = wrapper.querySelector(".size-chart-close");

        if (openBtn && modal && closeBtn) {
          openBtn.addEventListener("click", () => modal.classList.add("active"));
          closeBtn.addEventListener("click", () => modal.classList.remove("active"));
          modal.addEventListener("click", () => modal.classList.remove("active"));
        }
      });
    </script>
  </div>
{% endif %}
